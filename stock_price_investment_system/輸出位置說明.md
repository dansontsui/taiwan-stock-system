# é¸é …5 vs é¸é …5a è¼¸å‡ºä½ç½®èªªæ˜

## ğŸ“ è¼¸å‡ºä½ç½®çµ±ä¸€

**å¥½æ¶ˆæ¯ï¼** é¸é …5aç¾åœ¨å·²ç¶“èˆ‡é¸é …5ä½¿ç”¨**å®Œå…¨ç›¸åŒçš„è¼¸å‡ºä½ç½®**ï¼

## ğŸ—‚ï¸ è¼¸å‡ºç›®éŒ„çµæ§‹

### åŸºç¤è·¯å¾‘
```
stock_price_investment_system/results/holdout/
```

### åƒæ•¸åŒ–è³‡æ–™å¤¾å‘½åè¦å‰‡
```
holdout_{é–‹å§‹å¹´æœˆ}_{çµæŸå¹´æœˆ}_{é–€æª»}_{TopK}_{å¸‚å ´æ¿¾ç¶²}_{æ™‚é–“æˆ³}
```

**ç¯„ä¾‹**ï¼š
```
holdout_202301_202306_020_k10_MF_0827094316
```
- `202301`: é–‹å§‹æ—¥æœŸ 2023-01
- `202306`: çµæŸæ—¥æœŸ 2023-06  
- `020`: é æ¸¬é–€æª» 2.0%
- `k10`: TopK = 10æª”è‚¡ç¥¨
- `MF`: å¸‚å ´æ¿¾ç¶²å•Ÿç”¨ (Market Filter)
- `0827094316`: åŸ·è¡Œæ™‚é–“æˆ³

## ğŸ“„ æª”æ¡ˆè¼¸å‡ºå°æ¯”

### é¸é …5 (ç­‰æ¬Šé‡å›æ¸¬) è¼¸å‡ºæª”æ¡ˆ
```
ğŸ“ holdout_YYYYMM_YYYYMM_XXX_kXX_XX_TIMESTAMP/
â”œâ”€â”€ ğŸ“„ holdout_TIMESTAMP.json          # ä¸»è¦çµæœJSON
â”œâ”€â”€ ğŸ“„ holdout_trades_TIMESTAMP.csv    # äº¤æ˜“è¨˜éŒ„CSV
â”œâ”€â”€ ğŸ“„ holdout_monthly_SESSION_DATE.csv # æ¯æœˆè©³ç´°è¨˜éŒ„
â””â”€â”€ ğŸ“ charts/                         # åœ–è¡¨ç›®éŒ„
    â”œâ”€â”€ nav_curve_TIMESTAMP.png
    â”œâ”€â”€ monthly_returns_TIMESTAMP.png
    â”œâ”€â”€ trade_statistics_TIMESTAMP.png
    â””â”€â”€ stock_performance_TIMESTAMP.png
```

### é¸é …5a (æ¯æœˆå®šæœŸå®šé¡) è¼¸å‡ºæª”æ¡ˆ
```
ğŸ“ holdout_YYYYMM_YYYYMM_XXX_kXX_XX_TIMESTAMP/
â”œâ”€â”€ ğŸ“„ holdout_TIMESTAMP.json              # ä¸»è¦çµæœJSON (èˆ‡é¸é …5ç›¸åŒå‘½å)
â”œâ”€â”€ ğŸ“„ holdout_trades_TIMESTAMP.csv        # äº¤æ˜“è¨˜éŒ„CSV (èˆ‡é¸é …5ç›¸åŒå‘½åï¼Œä½†åŒ…å«æ›´å¤šæ¬„ä½)
â”œâ”€â”€ ğŸ“„ monthly_summary_TIMESTAMP.csv       # æ¯æœˆæŠ•è³‡æ‘˜è¦ (æ–°å¢)
â””â”€â”€ ğŸ“„ cost_impact_analysis_TIMESTAMP.csv  # äº¤æ˜“æˆæœ¬å½±éŸ¿åˆ†æ (æ–°å¢)
```

## ğŸ” æª”æ¡ˆå…§å®¹å·®ç•°

### ğŸ“„ `holdout_trades_TIMESTAMP.csv` æ¯”è¼ƒ

#### é¸é …5çš„æ¬„ä½
```csv
entry_date, stock_id, model_type, predicted_return,
entry_price, exit_date, exit_price, actual_return,
holding_days, profit_loss, max_return_20d, min_return_20d
```

#### é¸é …5açš„æ¬„ä½ (åŒ…å«é¸é …5çš„æ‰€æœ‰æ¬„ä½ + é¡å¤–æ¬„ä½)
```csv
# åŸºæœ¬è³‡è¨Š (èˆ‡é¸é …5ç›¸åŒ)
entry_date, stock_id, model_type, predicted_return,
entry_price, exit_date, exit_price, holding_days,

# é¸é …5çš„è¨ˆç®—çµæœ (ç­‰æ¬Šé‡ï¼Œç„¡äº¤æ˜“æˆæœ¬)
actual_return_gross, profit_loss_gross, max_return_20d, min_return_20d,

# é¸é …5açš„è¨ˆç®—çµæœ (å®šæœŸå®šé¡ï¼Œå«äº¤æ˜“æˆæœ¬)
shares, investment_amount, month_end_value,
actual_return_net, profit_loss_net, transaction_costs,

# æˆæœ¬å½±éŸ¿åˆ†æ
cost_impact
```

### ğŸ“„ æ–°å¢çš„åˆ†ææª”æ¡ˆ

#### `monthly_summary_TIMESTAMP.csv`
```csv
æœˆä»½, å¸‚å ´æ¿¾ç¶²è§¸ç™¼, å…¥é¸è‚¡ç¥¨æ•¸, å…¥é¸è‚¡ç¥¨,
æŠ•è³‡é‡‘é¡, æœˆåº•åƒ¹å€¼, æœˆå ±é…¬ç‡, äº¤æ˜“ç­†æ•¸
```

#### `cost_impact_analysis_TIMESTAMP.csv`
```csv
è‚¡ç¥¨ä»£è™Ÿ, é€²å ´æ—¥æœŸ, æ¯›å ±é…¬ç‡, æ·¨å ±é…¬ç‡,
äº¤æ˜“æˆæœ¬å½±éŸ¿, æŠ•è³‡é‡‘é¡, äº¤æ˜“æˆæœ¬é‡‘é¡
```

## ğŸ¯ å¯¦éš›ç¯„ä¾‹

### åŸ·è¡Œé¸é …5aå¾Œçš„è¼¸å‡º
```
ğŸ“ å®Œæ•´è·¯å¾‘ç¯„ä¾‹:
G:\WorkFolder\taiwan-stock-system\stock_price_investment_system\results\holdout\holdout_202301_202306_020_k10_MF_20250827_143022\

ğŸ“„ ç”¢ç”Ÿçš„æª”æ¡ˆ:
â”œâ”€â”€ holdout_20250827_143022.json              # èˆ‡é¸é …5ç›¸åŒå‘½å
â”œâ”€â”€ holdout_trades_20250827_143022.csv        # èˆ‡é¸é …5ç›¸åŒå‘½åï¼Œä½†å…§å®¹æ›´è±å¯Œ
â”œâ”€â”€ monthly_summary_20250827_143022.csv       # é¸é …5aå°ˆå±¬
â””â”€â”€ cost_impact_analysis_20250827_143022.csv  # é¸é …5aå°ˆå±¬
```

### æ—¥èªŒè¼¸å‡ºç¯„ä¾‹
```
ğŸ’¾ äº¤æ˜“è¨˜éŒ„CSVå·²ä¿å­˜: holdout_trades_20250827_143022.csv
ğŸ’¾ æ¯æœˆæ‘˜è¦CSVå·²ä¿å­˜: monthly_summary_20250827_143022.csv
ğŸ’¾ æ¯æœˆå®šæœŸå®šé¡å›æ¸¬çµæœå·²ä¿å­˜: holdout_20250827_143022.json
ğŸ’¾ æˆæœ¬å½±éŸ¿åˆ†æCSVå·²ä¿å­˜: cost_impact_analysis_20250827_143022.csv
ğŸ“ æ‰€æœ‰çµæœå·²ä¿å­˜è‡³ç›®éŒ„: holdout_202301_202306_020_k10_MF_20250827_143022
ğŸ“‚ å®Œæ•´è·¯å¾‘: G:\WorkFolder\taiwan-stock-system\stock_price_investment_system\results\holdout\holdout_202301_202306_020_k10_MF_20250827_143022
```

## âœ… çµ±ä¸€çš„å¥½è™•

### 1. **ç›¸åŒçš„çµ„ç¹”çµæ§‹**
- âœ… æ‰€æœ‰å›æ¸¬çµæœéƒ½åœ¨åŒä¸€å€‹åŸºç¤ç›®éŒ„
- âœ… ä½¿ç”¨ç›¸åŒçš„åƒæ•¸åŒ–è³‡æ–™å¤¾å‘½å
- âœ… ä¾¿æ–¼æ¯”è¼ƒå’Œç®¡ç†

### 2. **æª”æ¡ˆå‘½åä¸€è‡´**
- âœ… ä¸»è¦æª”æ¡ˆ (`holdout_*.json`, `holdout_trades_*.csv`) å‘½åç›¸åŒ
- âœ… å¯ä»¥ç›´æ¥æ›¿æ›ä½¿ç”¨
- âœ… å·¥å…·å’Œè…³æœ¬ç›¸å®¹æ€§æ›´å¥½

### 3. **å…§å®¹å‘ä¸‹ç›¸å®¹**
- âœ… é¸é …5açš„CSVåŒ…å«é¸é …5çš„æ‰€æœ‰æ¬„ä½
- âœ… å¯ä»¥ç”¨é¸é …5açš„çµæœé€²è¡Œé¸é …5çš„åˆ†æ
- âœ… é¡å¤–æä¾›æ›´è©³ç´°çš„æˆæœ¬åˆ†æ

### 4. **ä¾¿æ–¼æ¯”è¼ƒåˆ†æ**
- âœ… åŒä¸€å€‹CSVæª”æ¡ˆä¸­å¯ä»¥æ¯”è¼ƒæ¯›å ±é…¬ vs æ·¨å ±é…¬
- âœ… ç›´æ¥çœ‹åˆ°äº¤æ˜“æˆæœ¬çš„å½±éŸ¿
- âœ… ä¸éœ€è¦é¡å¤–çš„è³‡æ–™åˆä½µå·¥ä½œ

## ğŸ’¡ ä½¿ç”¨å»ºè­°

### æŸ¥æ‰¾çµæœæª”æ¡ˆ
1. é€²å…¥ `stock_price_investment_system/results/holdout/`
2. æ‰¾åˆ°å°æ‡‰åƒæ•¸çš„è³‡æ–™å¤¾ (ä»¥ `holdout_` é–‹é ­)
3. æŸ¥çœ‹è³‡æ–™å¤¾å…§çš„æª”æ¡ˆ

### ä¸»è¦åˆ†ææª”æ¡ˆ
- **`holdout_trades_*.csv`**: æœ€é‡è¦çš„äº¤æ˜“è¨˜éŒ„ï¼ŒåŒ…å«æ‰€æœ‰è¨ˆç®—çµæœ
- **`cost_impact_analysis_*.csv`**: å°ˆé–€åˆ†æäº¤æ˜“æˆæœ¬å½±éŸ¿
- **`monthly_summary_*.csv`**: æ¯æœˆæŠ•è³‡æ¦‚æ³

### å¿«é€Ÿå°æ¯”
```bash
# åœ¨åŒä¸€å€‹è³‡æ–™å¤¾ä¸­ï¼Œå¯ä»¥ç›´æ¥æ¯”è¼ƒï¼š
# - æ¯›å ±é…¬ (actual_return_gross) vs æ·¨å ±é…¬ (actual_return_net)
# - æˆæœ¬å½±éŸ¿ (cost_impact)
# - å¯¦éš›æŠ•è³‡é‡‘é¡ vs ç†è«–ç­‰æ¬Šé‡
```

**ç¸½çµï¼šé¸é …5aç¾åœ¨å®Œå…¨ä½¿ç”¨èˆ‡é¸é …5ç›¸åŒçš„è¼¸å‡ºä½ç½®ï¼Œä¸¦ä¸”æä¾›æ›´è±å¯Œçš„åˆ†æå…§å®¹ï¼** ğŸ‰
