{
  "backtest_type": "monthly_investment",
  "parameters": {
    "start_date": "2024-12-01",
    "end_date": "2024-12-31",
    "monthly_investment": 1000000.0,
    "min_predicted_return": 0.02,
    "top_k": 7,
    "use_market_filter": true
  },
  "portfolio_metrics": {
    "success": true,
    "portfolio_metrics": {
      "total_invested": 919200.0,
      "total_current_value": 879170.4375,
      "total_return": -0.04354826207571801,
      "total_profit_loss": -40029.5625,
      "avg_monthly_return": -0.04354826207571801,
      "monthly_volatility": NaN,
      "annualized_return": -0.4139202344228319,
      "annualized_volatility": NaN,
      "sharpe_ratio": 0,
      "max_drawdown": 0,
      "win_rate": 0.0,
      "monthly_win_rate": 0.0,
      "total_trades": 3,
      "total_months": 1,
      "successful_months": 0
    },
    "detailed_trades": [
      {
        "entry_date": "2025-01-02",
        "stock_id": "8067",
        "model_type": "xgboost",
        "predicted_return": 0.18396997451782227,
        "entry_price": 18.2,
        "exit_date": "2025-01-22",
        "exit_price": 17.75,
        "holding_days": 20,
        "actual_return_gross": -0.024725274725274686,
        "profit_loss_gross": -8099.999999999987,
        "max_return_20d": 0.07417582417582426,
        "min_return_20d": -1.0,
        "shares": 18000,
        "investment_amount": 327600.0,
        "month_end_value": 317295.8325,
        "actual_return_net": -0.031453502747252705,
        "profit_loss_net": -10304.167499999987,
        "transaction_costs": {
          "buy_commission": 466.83000000000004,
          "buy_slippage": 163.8,
          "sell_commission": 455.2875,
          "sell_tax": 958.5,
          "sell_slippage": 159.75,
          "total_cost_amount": 2204.1675,
          "total_cost_rate": 0.006728228021978022
        },
        "cost_impact": 0.006728228021978019,
        "actual_return": -0.031453502747252705,
        "profit_loss": -10304.167499999987
      },
      {
        "entry_date": "2025-01-02",
        "stock_id": "8279",
        "model_type": "random_forest",
        "predicted_return": 0.13127727353084434,
        "entry_price": 132.0,
        "exit_date": "2025-01-22",
        "exit_price": 123.0,
        "holding_days": 20,
        "actual_return_gross": -0.06818181818181818,
        "profit_loss_gross": -18000.0,
        "max_return_20d": 0.0,
        "min_return_20d": -1.0,
        "shares": 2000,
        "investment_amount": 264000.0,
        "month_end_value": 244280.25,
        "actual_return_net": -0.07469602272727272,
        "profit_loss_net": -19719.75,
        "transaction_costs": {
          "buy_commission": 376.2,
          "buy_slippage": 132.0,
          "sell_commission": 350.55,
          "sell_tax": 738.0,
          "sell_slippage": 123.0,
          "total_cost_amount": 1719.75,
          "total_cost_rate": 0.006514204545454545
        },
        "cost_impact": 0.006514204545454538,
        "actual_return": -0.07469602272727272,
        "profit_loss": -19719.75
      },
      {
        "entry_date": "2024-12-31",
        "stock_id": "2442",
        "model_type": "xgboost",
        "predicted_return": 0.10500837117433548,
        "entry_price": 25.2,
        "exit_date": "2025-01-20",
        "exit_price": 24.6,
        "holding_days": 20,
        "actual_return_gross": -0.023809523809523725,
        "profit_loss_gross": -7799.999999999973,
        "max_return_20d": 0.003968253968254024,
        "min_return_20d": -0.07142857142857145,
        "shares": 13000,
        "investment_amount": 327600.0,
        "month_end_value": 317594.355,
        "actual_return_net": -0.030542261904761822,
        "profit_loss_net": -10005.644999999973,
        "transaction_costs": {
          "buy_commission": 466.83000000000004,
          "buy_slippage": 163.8,
          "sell_commission": 455.71500000000003,
          "sell_tax": 959.4,
          "sell_slippage": 159.9,
          "total_cost_amount": 2205.6450000000004,
          "total_cost_rate": 0.006732738095238096
        },
        "cost_impact": 0.006732738095238097,
        "actual_return": -0.030542261904761822,
        "profit_loss": -10005.644999999973
      }
    ],
    "monthly_results": [
      {
        "month": "2024-12",
        "market_filter_triggered": false,
        "selected_stocks": [
          "8067",
          "8279",
          "2442"
        ],
        "investment_amount": 919200.0,
        "month_end_value": 879170.4375,
        "return_rate": -0.04354826207571801,
        "trades": [
          {
            "entry_date": "2025-01-02",
            "stock_id": "8067",
            "model_type": "xgboost",
            "predicted_return": 0.18396997451782227,
            "entry_price": 18.2,
            "exit_date": "2025-01-22",
            "exit_price": 17.75,
            "holding_days": 20,
            "actual_return_gross": -0.024725274725274686,
            "profit_loss_gross": -8099.999999999987,
            "max_return_20d": 0.07417582417582426,
            "min_return_20d": -1.0,
            "shares": 18000,
            "investment_amount": 327600.0,
            "month_end_value": 317295.8325,
            "actual_return_net": -0.031453502747252705,
            "profit_loss_net": -10304.167499999987,
            "transaction_costs": {
              "buy_commission": 466.83000000000004,
              "buy_slippage": 163.8,
              "sell_commission": 455.2875,
              "sell_tax": 958.5,
              "sell_slippage": 159.75,
              "total_cost_amount": 2204.1675,
              "total_cost_rate": 0.006728228021978022
            },
            "cost_impact": 0.006728228021978019,
            "actual_return": -0.031453502747252705,
            "profit_loss": -10304.167499999987
          },
          {
            "entry_date": "2025-01-02",
            "stock_id": "8279",
            "model_type": "random_forest",
            "predicted_return": 0.13127727353084434,
            "entry_price": 132.0,
            "exit_date": "2025-01-22",
            "exit_price": 123.0,
            "holding_days": 20,
            "actual_return_gross": -0.06818181818181818,
            "profit_loss_gross": -18000.0,
            "max_return_20d": 0.0,
            "min_return_20d": -1.0,
            "shares": 2000,
            "investment_amount": 264000.0,
            "month_end_value": 244280.25,
            "actual_return_net": -0.07469602272727272,
            "profit_loss_net": -19719.75,
            "transaction_costs": {
              "buy_commission": 376.2,
              "buy_slippage": 132.0,
              "sell_commission": 350.55,
              "sell_tax": 738.0,
              "sell_slippage": 123.0,
              "total_cost_amount": 1719.75,
              "total_cost_rate": 0.006514204545454545
            },
            "cost_impact": 0.006514204545454538,
            "actual_return": -0.07469602272727272,
            "profit_loss": -19719.75
          },
          {
            "entry_date": "2024-12-31",
            "stock_id": "2442",
            "model_type": "xgboost",
            "predicted_return": 0.10500837117433548,
            "entry_price": 25.2,
            "exit_date": "2025-01-20",
            "exit_price": 24.6,
            "holding_days": 20,
            "actual_return_gross": -0.023809523809523725,
            "profit_loss_gross": -7799.999999999973,
            "max_return_20d": 0.003968253968254024,
            "min_return_20d": -0.07142857142857145,
            "shares": 13000,
            "investment_amount": 327600.0,
            "month_end_value": 317594.355,
            "actual_return_net": -0.030542261904761822,
            "profit_loss_net": -10005.644999999973,
            "transaction_costs": {
              "buy_commission": 466.83000000000004,
              "buy_slippage": 163.8,
              "sell_commission": 455.71500000000003,
              "sell_tax": 959.4,
              "sell_slippage": 159.9,
              "total_cost_amount": 2205.6450000000004,
              "total_cost_rate": 0.006732738095238096
            },
            "cost_impact": 0.006732738095238097,
            "actual_return": -0.030542261904761822,
            "profit_loss": -10005.644999999973
          }
        ]
      }
    ]
  },
  "monthly_results_count": 1,
  "total_trades": 3,
  "detailed_trades": [
    {
      "entry_date": "2025-01-02",
      "stock_id": "8067",
      "model_type": "xgboost",
      "predicted_return": 0.18396997451782227,
      "entry_price": 18.2,
      "exit_date": "2025-01-22",
      "exit_price": 17.75,
      "holding_days": 20,
      "actual_return_gross": -0.024725274725274686,
      "profit_loss_gross": -8099.999999999987,
      "max_return_20d": 0.07417582417582426,
      "min_return_20d": -1.0,
      "shares": 18000,
      "investment_amount": 327600.0,
      "month_end_value": 317295.8325,
      "actual_return_net": -0.031453502747252705,
      "profit_loss_net": -10304.167499999987,
      "transaction_costs": {
        "buy_commission": 466.83000000000004,
        "buy_slippage": 163.8,
        "sell_commission": 455.2875,
        "sell_tax": 958.5,
        "sell_slippage": 159.75,
        "total_cost_amount": 2204.1675,
        "total_cost_rate": 0.006728228021978022
      },
      "cost_impact": 0.006728228021978019,
      "actual_return": -0.031453502747252705,
      "profit_loss": -10304.167499999987
    },
    {
      "entry_date": "2025-01-02",
      "stock_id": "8279",
      "model_type": "random_forest",
      "predicted_return": 0.13127727353084434,
      "entry_price": 132.0,
      "exit_date": "2025-01-22",
      "exit_price": 123.0,
      "holding_days": 20,
      "actual_return_gross": -0.06818181818181818,
      "profit_loss_gross": -18000.0,
      "max_return_20d": 0.0,
      "min_return_20d": -1.0,
      "shares": 2000,
      "investment_amount": 264000.0,
      "month_end_value": 244280.25,
      "actual_return_net": -0.07469602272727272,
      "profit_loss_net": -19719.75,
      "transaction_costs": {
        "buy_commission": 376.2,
        "buy_slippage": 132.0,
        "sell_commission": 350.55,
        "sell_tax": 738.0,
        "sell_slippage": 123.0,
        "total_cost_amount": 1719.75,
        "total_cost_rate": 0.006514204545454545
      },
      "cost_impact": 0.006514204545454538,
      "actual_return": -0.07469602272727272,
      "profit_loss": -19719.75
    },
    {
      "entry_date": "2024-12-31",
      "stock_id": "2442",
      "model_type": "xgboost",
      "predicted_return": 0.10500837117433548,
      "entry_price": 25.2,
      "exit_date": "2025-01-20",
      "exit_price": 24.6,
      "holding_days": 20,
      "actual_return_gross": -0.023809523809523725,
      "profit_loss_gross": -7799.999999999973,
      "max_return_20d": 0.003968253968254024,
      "min_return_20d": -0.07142857142857145,
      "shares": 13000,
      "investment_amount": 327600.0,
      "month_end_value": 317594.355,
      "actual_return_net": -0.030542261904761822,
      "profit_loss_net": -10005.644999999973,
      "transaction_costs": {
        "buy_commission": 466.83000000000004,
        "buy_slippage": 163.8,
        "sell_commission": 455.71500000000003,
        "sell_tax": 959.4,
        "sell_slippage": 159.9,
        "total_cost_amount": 2205.6450000000004,
        "total_cost_rate": 0.006732738095238096
      },
      "cost_impact": 0.006732738095238097,
      "actual_return": -0.030542261904761822,
      "profit_loss": -10005.644999999973
    }
  ],
  "generated_at": "2025-08-28T12:41:50.609809",
  "charts": {
    "nav_curve": "G:\\WorkFolder\\taiwan-stock-system\\stock_price_investment_system\\results\\holdout\\holdout_202412_202412_020_k7_MF_0828124138\\charts\\nav_curve_20250828_124151.png",
    "monthly_returns": "G:\\WorkFolder\\taiwan-stock-system\\stock_price_investment_system\\results\\holdout\\holdout_202412_202412_020_k7_MF_0828124138\\charts\\monthly_returns_20250828_124152.png",
    "trade_statistics": "G:\\WorkFolder\\taiwan-stock-system\\stock_price_investment_system\\results\\holdout\\holdout_202412_202412_020_k7_MF_0828124138\\charts\\trade_statistics_20250828_124152.png",
    "stock_performance": "G:\\WorkFolder\\taiwan-stock-system\\stock_price_investment_system\\results\\holdout\\holdout_202412_202412_020_k7_MF_0828124138\\charts\\stock_performance_20250828_124153.png"
  },
  "stop_loss_analysis": {
    "best_stop_loss": 0.02,
    "best_take_profit": 0.05,
    "best_score": 22.908533638544597,
    "performance_improvement": {
      "avg_return_improvement": 92.70243600298244,
      "win_rate_improvement": 0,
      "max_drawdown_improvement": 48.97073844271461,
      "original_avg_return": -0.04556392912642907,
      "optimal_avg_return": -0.0033250568875568868,
      "original_win_rate": 0.0,
      "optimal_win_rate": 0.3333333333333333,
      "original_max_drawdown": 0.10295689914265413,
      "optimal_max_drawdown": 0.052538145354775495
    }
  }
}