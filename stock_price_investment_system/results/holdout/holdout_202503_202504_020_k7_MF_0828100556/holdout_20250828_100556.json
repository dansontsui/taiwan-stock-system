{
  "backtest_type": "monthly_investment",
  "parameters": {
    "start_date": "2025-03-01",
    "end_date": "2025-04-30",
    "monthly_investment": 1000000.0,
    "min_predicted_return": 0.02,
    "top_k": 7,
    "use_market_filter": true
  },
  "portfolio_metrics": {
    "success": true,
    "portfolio_metrics": {
      "total_invested": 1916000.0,
      "total_current_value": 1973535.67575,
      "total_return": 0.030029058324634622,
      "total_profit_loss": 57535.67574999994,
      "avg_monthly_return": 0.030055326610076604,
      "monthly_volatility": 0.029657257483247303,
      "annualized_return": 0.426680178015292,
      "annualized_volatility": 0.10273575354827323,
      "sharpe_ratio": 4.15318098401648,
      "max_drawdown": 0,
      "win_rate": 1.0,
      "monthly_win_rate": 1.0,
      "total_trades": 4,
      "total_months": 2,
      "successful_months": 2
    },
    "detailed_trades": [
      {
        "entry_date": "2025-03-31",
        "stock_id": "5701",
        "model_type": "xgboost",
        "predicted_return": 0.058283522725105286,
        "entry_price": 5.1,
        "exit_date": "2025-04-18",
        "exit_price": 5.48,
        "holding_days": 18,
        "actual_return_gross": 0.07450980392156878,
        "profit_loss_gross": 36860.00000000007,
        "max_return_20d": 0.111764705882353,
        "min_return_20d": -0.019607843137254832,
        "shares": 97000,
        "investment_amount": 494699.99999999994,
        "month_end_value": 527989.7695,
        "actual_return_net": 0.06729284313725506,
        "profit_loss_net": 33289.769500000075,
        "transaction_costs": {
          "buy_commission": 704.9475,
          "buy_slippage": 247.34999999999997,
          "sell_commission": 757.4730000000001,
          "sell_tax": 1594.68,
          "sell_slippage": 265.78000000000003,
          "total_cost_amount": 3570.2305,
          "total_cost_rate": 0.0072169607843137265
        },
        "cost_impact": 0.00721696078431372,
        "actual_return": 0.06729284313725506,
        "profit_loss": 33289.769500000075
      },
      {
        "entry_date": "2025-03-31",
        "stock_id": "8271",
        "model_type": "lightgbm",
        "predicted_return": 0.023279620002081565,
        "entry_price": 46.45,
        "exit_date": "2025-04-18",
        "exit_price": 44.3,
        "holding_days": 18,
        "actual_return_gross": -0.04628632938643715,
        "profit_loss_gross": -21500.00000000006,
        "max_return_20d": 0.03336921420882663,
        "min_return_20d": -0.22820236813778258,
        "shares": 10000,
        "investment_amount": 464500.0,
        "month_end_value": 439924.0625,
        "actual_return_net": -0.052908369214208946,
        "profit_loss_net": -24575.93750000006,
        "transaction_costs": {
          "buy_commission": 661.9125,
          "buy_slippage": 232.25,
          "sell_commission": 631.275,
          "sell_tax": 1329.0,
          "sell_slippage": 221.5,
          "total_cost_amount": 3075.9375,
          "total_cost_rate": 0.006622039827771798
        },
        "cost_impact": 0.006622039827771799,
        "actual_return": -0.052908369214208946,
        "profit_loss": -24575.93750000006
      },
      {
        "entry_date": "2025-04-30",
        "stock_id": "5701",
        "model_type": "xgboost",
        "predicted_return": 0.385973185300827,
        "entry_price": 5.24,
        "exit_date": "2025-05-20",
        "exit_price": 5.31,
        "holding_days": 20,
        "actual_return_gross": 0.013358778625954082,
        "profit_loss_gross": 6649.999999999943,
        "max_return_20d": 0.04198473282442743,
        "min_return_20d": 0.0,
        "shares": 95000,
        "investment_amount": 497800.0,
        "month_end_value": 501007.3187499999,
        "actual_return_net": 0.006442986641221258,
        "profit_loss_net": 3207.318749999943,
        "transaction_costs": {
          "buy_commission": 709.365,
          "buy_slippage": 248.9,
          "sell_commission": 718.84125,
          "sell_tax": 1513.35,
          "sell_slippage": 252.22499999999997,
          "total_cost_amount": 3442.6812499999996,
          "total_cost_rate": 0.006915791984732824
        },
        "cost_impact": 0.006915791984732824,
        "actual_return": 0.006442986641221258,
        "profit_loss": 3207.318749999943
      },
      {
        "entry_date": "2025-04-30",
        "stock_id": "8271",
        "model_type": "lightgbm",
        "predicted_return": 0.022002526134781993,
        "entry_price": 45.9,
        "exit_date": "2025-05-20",
        "exit_price": 50.8,
        "holding_days": 20,
        "actual_return_gross": 0.10675381263616555,
        "profit_loss_gross": 48999.999999999985,
        "max_return_20d": 0.11111111111111115,
        "min_return_20d": -0.01960784313725487,
        "shares": 10000,
        "investment_amount": 459000.0,
        "month_end_value": 504614.525,
        "actual_return_net": 0.09937805010893244,
        "profit_loss_net": 45614.52499999999,
        "transaction_costs": {
          "buy_commission": 654.075,
          "buy_slippage": 229.5,
          "sell_commission": 723.9,
          "sell_tax": 1524.0,
          "sell_slippage": 254.0,
          "total_cost_amount": 3385.475,
          "total_cost_rate": 0.007375762527233115
        },
        "cost_impact": 0.007375762527233112,
        "actual_return": 0.09937805010893244,
        "profit_loss": 45614.52499999999
      }
    ],
    "monthly_results": [
      {
        "month": "2025-03",
        "market_filter_triggered": false,
        "selected_stocks": [
          "5701",
          "8271"
        ],
        "investment_amount": 959200.0,
        "month_end_value": 967913.832,
        "return_rate": 0.009084478732276953,
        "trades": [
          {
            "entry_date": "2025-03-31",
            "stock_id": "5701",
            "model_type": "xgboost",
            "predicted_return": 0.058283522725105286,
            "entry_price": 5.1,
            "exit_date": "2025-04-18",
            "exit_price": 5.48,
            "holding_days": 18,
            "actual_return_gross": 0.07450980392156878,
            "profit_loss_gross": 36860.00000000007,
            "max_return_20d": 0.111764705882353,
            "min_return_20d": -0.019607843137254832,
            "shares": 97000,
            "investment_amount": 494699.99999999994,
            "month_end_value": 527989.7695,
            "actual_return_net": 0.06729284313725506,
            "profit_loss_net": 33289.769500000075,
            "transaction_costs": {
              "buy_commission": 704.9475,
              "buy_slippage": 247.34999999999997,
              "sell_commission": 757.4730000000001,
              "sell_tax": 1594.68,
              "sell_slippage": 265.78000000000003,
              "total_cost_amount": 3570.2305,
              "total_cost_rate": 0.0072169607843137265
            },
            "cost_impact": 0.00721696078431372,
            "actual_return": 0.06729284313725506,
            "profit_loss": 33289.769500000075
          },
          {
            "entry_date": "2025-03-31",
            "stock_id": "8271",
            "model_type": "lightgbm",
            "predicted_return": 0.023279620002081565,
            "entry_price": 46.45,
            "exit_date": "2025-04-18",
            "exit_price": 44.3,
            "holding_days": 18,
            "actual_return_gross": -0.04628632938643715,
            "profit_loss_gross": -21500.00000000006,
            "max_return_20d": 0.03336921420882663,
            "min_return_20d": -0.22820236813778258,
            "shares": 10000,
            "investment_amount": 464500.0,
            "month_end_value": 439924.0625,
            "actual_return_net": -0.052908369214208946,
            "profit_loss_net": -24575.93750000006,
            "transaction_costs": {
              "buy_commission": 661.9125,
              "buy_slippage": 232.25,
              "sell_commission": 631.275,
              "sell_tax": 1329.0,
              "sell_slippage": 221.5,
              "total_cost_amount": 3075.9375,
              "total_cost_rate": 0.006622039827771798
            },
            "cost_impact": 0.006622039827771799,
            "actual_return": -0.052908369214208946,
            "profit_loss": -24575.93750000006
          }
        ]
      },
      {
        "month": "2025-04",
        "market_filter_triggered": false,
        "selected_stocks": [
          "5701",
          "8271"
        ],
        "investment_amount": 956800.0,
        "month_end_value": 1005621.84375,
        "return_rate": 0.051026174487876254,
        "trades": [
          {
            "entry_date": "2025-04-30",
            "stock_id": "5701",
            "model_type": "xgboost",
            "predicted_return": 0.385973185300827,
            "entry_price": 5.24,
            "exit_date": "2025-05-20",
            "exit_price": 5.31,
            "holding_days": 20,
            "actual_return_gross": 0.013358778625954082,
            "profit_loss_gross": 6649.999999999943,
            "max_return_20d": 0.04198473282442743,
            "min_return_20d": 0.0,
            "shares": 95000,
            "investment_amount": 497800.0,
            "month_end_value": 501007.3187499999,
            "actual_return_net": 0.006442986641221258,
            "profit_loss_net": 3207.318749999943,
            "transaction_costs": {
              "buy_commission": 709.365,
              "buy_slippage": 248.9,
              "sell_commission": 718.84125,
              "sell_tax": 1513.35,
              "sell_slippage": 252.22499999999997,
              "total_cost_amount": 3442.6812499999996,
              "total_cost_rate": 0.006915791984732824
            },
            "cost_impact": 0.006915791984732824,
            "actual_return": 0.006442986641221258,
            "profit_loss": 3207.318749999943
          },
          {
            "entry_date": "2025-04-30",
            "stock_id": "8271",
            "model_type": "lightgbm",
            "predicted_return": 0.022002526134781993,
            "entry_price": 45.9,
            "exit_date": "2025-05-20",
            "exit_price": 50.8,
            "holding_days": 20,
            "actual_return_gross": 0.10675381263616555,
            "profit_loss_gross": 48999.999999999985,
            "max_return_20d": 0.11111111111111115,
            "min_return_20d": -0.01960784313725487,
            "shares": 10000,
            "investment_amount": 459000.0,
            "month_end_value": 504614.525,
            "actual_return_net": 0.09937805010893244,
            "profit_loss_net": 45614.52499999999,
            "transaction_costs": {
              "buy_commission": 654.075,
              "buy_slippage": 229.5,
              "sell_commission": 723.9,
              "sell_tax": 1524.0,
              "sell_slippage": 254.0,
              "total_cost_amount": 3385.475,
              "total_cost_rate": 0.007375762527233115
            },
            "cost_impact": 0.007375762527233112,
            "actual_return": 0.09937805010893244,
            "profit_loss": 45614.52499999999
          }
        ]
      }
    ]
  },
  "monthly_results_count": 2,
  "total_trades": 4,
  "detailed_trades": [
    {
      "entry_date": "2025-03-31",
      "stock_id": "5701",
      "model_type": "xgboost",
      "predicted_return": 0.058283522725105286,
      "entry_price": 5.1,
      "exit_date": "2025-04-18",
      "exit_price": 5.48,
      "holding_days": 18,
      "actual_return_gross": 0.07450980392156878,
      "profit_loss_gross": 36860.00000000007,
      "max_return_20d": 0.111764705882353,
      "min_return_20d": -0.019607843137254832,
      "shares": 97000,
      "investment_amount": 494699.99999999994,
      "month_end_value": 527989.7695,
      "actual_return_net": 0.06729284313725506,
      "profit_loss_net": 33289.769500000075,
      "transaction_costs": {
        "buy_commission": 704.9475,
        "buy_slippage": 247.34999999999997,
        "sell_commission": 757.4730000000001,
        "sell_tax": 1594.68,
        "sell_slippage": 265.78000000000003,
        "total_cost_amount": 3570.2305,
        "total_cost_rate": 0.0072169607843137265
      },
      "cost_impact": 0.00721696078431372,
      "actual_return": 0.06729284313725506,
      "profit_loss": 33289.769500000075
    },
    {
      "entry_date": "2025-03-31",
      "stock_id": "8271",
      "model_type": "lightgbm",
      "predicted_return": 0.023279620002081565,
      "entry_price": 46.45,
      "exit_date": "2025-04-18",
      "exit_price": 44.3,
      "holding_days": 18,
      "actual_return_gross": -0.04628632938643715,
      "profit_loss_gross": -21500.00000000006,
      "max_return_20d": 0.03336921420882663,
      "min_return_20d": -0.22820236813778258,
      "shares": 10000,
      "investment_amount": 464500.0,
      "month_end_value": 439924.0625,
      "actual_return_net": -0.052908369214208946,
      "profit_loss_net": -24575.93750000006,
      "transaction_costs": {
        "buy_commission": 661.9125,
        "buy_slippage": 232.25,
        "sell_commission": 631.275,
        "sell_tax": 1329.0,
        "sell_slippage": 221.5,
        "total_cost_amount": 3075.9375,
        "total_cost_rate": 0.006622039827771798
      },
      "cost_impact": 0.006622039827771799,
      "actual_return": -0.052908369214208946,
      "profit_loss": -24575.93750000006
    },
    {
      "entry_date": "2025-04-30",
      "stock_id": "5701",
      "model_type": "xgboost",
      "predicted_return": 0.385973185300827,
      "entry_price": 5.24,
      "exit_date": "2025-05-20",
      "exit_price": 5.31,
      "holding_days": 20,
      "actual_return_gross": 0.013358778625954082,
      "profit_loss_gross": 6649.999999999943,
      "max_return_20d": 0.04198473282442743,
      "min_return_20d": 0.0,
      "shares": 95000,
      "investment_amount": 497800.0,
      "month_end_value": 501007.3187499999,
      "actual_return_net": 0.006442986641221258,
      "profit_loss_net": 3207.318749999943,
      "transaction_costs": {
        "buy_commission": 709.365,
        "buy_slippage": 248.9,
        "sell_commission": 718.84125,
        "sell_tax": 1513.35,
        "sell_slippage": 252.22499999999997,
        "total_cost_amount": 3442.6812499999996,
        "total_cost_rate": 0.006915791984732824
      },
      "cost_impact": 0.006915791984732824,
      "actual_return": 0.006442986641221258,
      "profit_loss": 3207.318749999943
    },
    {
      "entry_date": "2025-04-30",
      "stock_id": "8271",
      "model_type": "lightgbm",
      "predicted_return": 0.022002526134781993,
      "entry_price": 45.9,
      "exit_date": "2025-05-20",
      "exit_price": 50.8,
      "holding_days": 20,
      "actual_return_gross": 0.10675381263616555,
      "profit_loss_gross": 48999.999999999985,
      "max_return_20d": 0.11111111111111115,
      "min_return_20d": -0.01960784313725487,
      "shares": 10000,
      "investment_amount": 459000.0,
      "month_end_value": 504614.525,
      "actual_return_net": 0.09937805010893244,
      "profit_loss_net": 45614.52499999999,
      "transaction_costs": {
        "buy_commission": 654.075,
        "buy_slippage": 229.5,
        "sell_commission": 723.9,
        "sell_tax": 1524.0,
        "sell_slippage": 254.0,
        "total_cost_amount": 3385.475,
        "total_cost_rate": 0.007375762527233115
      },
      "cost_impact": 0.007375762527233112,
      "actual_return": 0.09937805010893244,
      "profit_loss": 45614.52499999999
    }
  ],
  "generated_at": "2025-08-28T10:06:11.844575",
  "charts": {
    "nav_curve": "G:\\WorkFolder\\taiwan-stock-system\\stock_price_investment_system\\results\\holdout\\holdout_202503_202504_020_k7_MF_0828100556\\charts\\nav_curve_20250828_100612.png",
    "monthly_returns": "G:\\WorkFolder\\taiwan-stock-system\\stock_price_investment_system\\results\\holdout\\holdout_202503_202504_020_k7_MF_0828100556\\charts\\monthly_returns_20250828_100613.png",
    "trade_statistics": "G:\\WorkFolder\\taiwan-stock-system\\stock_price_investment_system\\results\\holdout\\holdout_202503_202504_020_k7_MF_0828100556\\charts\\trade_statistics_20250828_100613.png",
    "stock_performance": "G:\\WorkFolder\\taiwan-stock-system\\stock_price_investment_system\\results\\holdout\\holdout_202503_202504_020_k7_MF_0828100556\\charts\\stock_performance_20250828_100614.png"
  },
  "stop_loss_analysis": {
    "best_stop_loss": 0.02,
    "best_take_profit": 0.1,
    "best_score": 52.70656571313772,
    "performance_improvement": {
      "avg_return_improvement": 31.70147577307874,
      "win_rate_improvement": -33.33333333333333,
      "max_drawdown_improvement": 48.812903268762184,
      "original_avg_return": 0.030051377668299954,
      "optimal_avg_return": 0.03957810787929246,
      "original_win_rate": 0.75,
      "optimal_win_rate": 0.5,
      "original_max_drawdown": 0.05290836921420888,
      "optimal_max_drawdown": 0.027082258128597547
    }
  }
}