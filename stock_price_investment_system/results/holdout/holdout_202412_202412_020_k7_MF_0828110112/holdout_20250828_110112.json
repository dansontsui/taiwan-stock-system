{
  "backtest_type": "monthly_investment",
  "parameters": {
    "start_date": "2024-12-01",
    "end_date": "2024-12-31",
    "monthly_investment": 1000000.0,
    "min_predicted_return": 0.02,
    "top_k": 7,
    "use_market_filter": true
  },
  "portfolio_metrics": {
    "success": true,
    "portfolio_metrics": {
      "total_invested": 1075400.0,
      "total_current_value": 988925.0474999999,
      "total_return": -0.08041189557374012,
      "total_profit_loss": -86474.95250000013,
      "avg_monthly_return": -0.08041189557374012,
      "monthly_volatility": NaN,
      "annualized_return": -0.6343040619690005,
      "annualized_volatility": NaN,
      "sharpe_ratio": 0,
      "max_drawdown": 0,
      "win_rate": 0.0,
      "monthly_win_rate": 0.0,
      "total_trades": 5,
      "total_months": 1,
      "successful_months": 0
    },
    "detailed_trades": [
      {
        "entry_date": "2024-12-31",
        "stock_id": "8033",
        "model_type": "random_forest",
        "predicted_return": 0.18594762734933087,
        "entry_price": 69.9,
        "exit_date": "2025-01-20",
        "exit_price": 67.5,
        "holding_days": 20,
        "actual_return_gross": -0.03433476394849793,
        "profit_loss_gross": -4800.000000000011,
        "max_return_20d": 0.0,
        "min_return_20d": -0.10586552217453513,
        "shares": 2000,
        "investment_amount": 139800.0,
        "month_end_value": 134066.01,
        "actual_return_net": -0.04101566523605158,
        "profit_loss_net": -5733.990000000011,
        "transaction_costs": {
          "buy_commission": 199.215,
          "buy_slippage": 69.9,
          "sell_commission": 192.375,
          "sell_tax": 405.0,
          "sell_slippage": 67.5,
          "total_cost_amount": 933.99,
          "total_cost_rate": 0.006680901287553648
        },
        "cost_impact": 0.0066809012875536505,
        "actual_return": -0.04101566523605158,
        "profit_loss": -5733.990000000011
      },
      {
        "entry_date": "2024-12-31",
        "stock_id": "2442",
        "model_type": "xgboost",
        "predicted_return": 0.10500837117433548,
        "entry_price": 25.2,
        "exit_date": "2025-01-20",
        "exit_price": 24.6,
        "holding_days": 20,
        "actual_return_gross": -0.023809523809523725,
        "profit_loss_gross": -2999.9999999999895,
        "max_return_20d": 0.003968253968254024,
        "min_return_20d": -0.07142857142857145,
        "shares": 5000,
        "investment_amount": 126000.0,
        "month_end_value": 122151.675,
        "actual_return_net": -0.030542261904761822,
        "profit_loss_net": -3848.32499999999,
        "transaction_costs": {
          "buy_commission": 179.55,
          "buy_slippage": 63.0,
          "sell_commission": 175.275,
          "sell_tax": 369.0,
          "sell_slippage": 61.5,
          "total_cost_amount": 848.325,
          "total_cost_rate": 0.0067327380952380955
        },
        "cost_impact": 0.006732738095238097,
        "actual_return": -0.030542261904761822,
        "profit_loss": -3848.32499999999
      },
      {
        "entry_date": "2024-12-31",
        "stock_id": "3017",
        "model_type": "xgboost",
        "predicted_return": 0.10302262008190155,
        "entry_price": 623.0,
        "exit_date": "2025-01-20",
        "exit_price": 565.0,
        "holding_days": 20,
        "actual_return_gross": -0.09309791332263243,
        "profit_loss_gross": -58000.0,
        "max_return_20d": 0.02247191011235955,
        "min_return_20d": -0.1942215088282504,
        "shares": 1000,
        "investment_amount": 623000.0,
        "month_end_value": 561018.1,
        "actual_return_net": -0.09948940609951847,
        "profit_loss_net": -61981.9,
        "transaction_costs": {
          "buy_commission": 887.775,
          "buy_slippage": 311.5,
          "sell_commission": 805.125,
          "sell_tax": 1695.0,
          "sell_slippage": 282.5,
          "total_cost_amount": 3981.9,
          "total_cost_rate": 0.006391492776886036
        },
        "cost_impact": 0.00639149277688604,
        "actual_return": -0.09948940609951847,
        "profit_loss": -61981.9
      },
      {
        "entry_date": "2024-12-31",
        "stock_id": "2392",
        "model_type": "xgboost",
        "predicted_return": 0.09384411573410034,
        "entry_price": 72.6,
        "exit_date": "2025-01-20",
        "exit_price": 68.2,
        "holding_days": 20,
        "actual_return_gross": -0.0606060606060605,
        "profit_loss_gross": -4399.999999999992,
        "max_return_20d": 0.0,
        "min_return_20d": -0.10192837465564727,
        "shares": 1000,
        "investment_amount": 72600.0,
        "month_end_value": 67724.36,
        "actual_return_net": -0.06715757575757565,
        "profit_loss_net": -4875.639999999992,
        "transaction_costs": {
          "buy_commission": 103.455,
          "buy_slippage": 36.300000000000004,
          "sell_commission": 97.185,
          "sell_tax": 204.6,
          "sell_slippage": 34.1,
          "total_cost_amount": 475.64,
          "total_cost_rate": 0.006551515151515151
        },
        "cost_impact": 0.006551515151515155,
        "actual_return": -0.06715757575757565,
        "profit_loss": -4875.639999999992
      },
      {
        "entry_date": "2024-12-31",
        "stock_id": "5392",
        "model_type": "xgboost",
        "predicted_return": 0.09360628575086594,
        "entry_price": 38.0,
        "exit_date": "2025-01-20",
        "exit_price": 34.9,
        "holding_days": 20,
        "actual_return_gross": -0.08157894736842108,
        "profit_loss_gross": -9300.000000000004,
        "max_return_20d": 0.0,
        "min_return_20d": -0.19605263157894734,
        "shares": 3000,
        "investment_amount": 114000.0,
        "month_end_value": 103964.9025,
        "actual_return_net": -0.08802717105263161,
        "profit_loss_net": -10035.097500000003,
        "transaction_costs": {
          "buy_commission": 162.45000000000002,
          "buy_slippage": 57.0,
          "sell_commission": 149.19750000000002,
          "sell_tax": 314.1,
          "sell_slippage": 52.35,
          "total_cost_amount": 735.0975000000001,
          "total_cost_rate": 0.006448223684210527
        },
        "cost_impact": 0.0064482236842105245,
        "actual_return": -0.08802717105263161,
        "profit_loss": -10035.097500000003
      }
    ],
    "monthly_results": [
      {
        "month": "2024-12",
        "market_filter_triggered": false,
        "selected_stocks": [
          "8033",
          "8067",
          "8279",
          "2442",
          "3017",
          "2392",
          "5392"
        ],
        "investment_amount": 1075400.0,
        "month_end_value": 988925.0474999999,
        "return_rate": -0.08041189557374012,
        "trades": [
          {
            "entry_date": "2024-12-31",
            "stock_id": "8033",
            "model_type": "random_forest",
            "predicted_return": 0.18594762734933087,
            "entry_price": 69.9,
            "exit_date": "2025-01-20",
            "exit_price": 67.5,
            "holding_days": 20,
            "actual_return_gross": -0.03433476394849793,
            "profit_loss_gross": -4800.000000000011,
            "max_return_20d": 0.0,
            "min_return_20d": -0.10586552217453513,
            "shares": 2000,
            "investment_amount": 139800.0,
            "month_end_value": 134066.01,
            "actual_return_net": -0.04101566523605158,
            "profit_loss_net": -5733.990000000011,
            "transaction_costs": {
              "buy_commission": 199.215,
              "buy_slippage": 69.9,
              "sell_commission": 192.375,
              "sell_tax": 405.0,
              "sell_slippage": 67.5,
              "total_cost_amount": 933.99,
              "total_cost_rate": 0.006680901287553648
            },
            "cost_impact": 0.0066809012875536505,
            "actual_return": -0.04101566523605158,
            "profit_loss": -5733.990000000011
          },
          {
            "entry_date": "2024-12-31",
            "stock_id": "2442",
            "model_type": "xgboost",
            "predicted_return": 0.10500837117433548,
            "entry_price": 25.2,
            "exit_date": "2025-01-20",
            "exit_price": 24.6,
            "holding_days": 20,
            "actual_return_gross": -0.023809523809523725,
            "profit_loss_gross": -2999.9999999999895,
            "max_return_20d": 0.003968253968254024,
            "min_return_20d": -0.07142857142857145,
            "shares": 5000,
            "investment_amount": 126000.0,
            "month_end_value": 122151.675,
            "actual_return_net": -0.030542261904761822,
            "profit_loss_net": -3848.32499999999,
            "transaction_costs": {
              "buy_commission": 179.55,
              "buy_slippage": 63.0,
              "sell_commission": 175.275,
              "sell_tax": 369.0,
              "sell_slippage": 61.5,
              "total_cost_amount": 848.325,
              "total_cost_rate": 0.0067327380952380955
            },
            "cost_impact": 0.006732738095238097,
            "actual_return": -0.030542261904761822,
            "profit_loss": -3848.32499999999
          },
          {
            "entry_date": "2024-12-31",
            "stock_id": "3017",
            "model_type": "xgboost",
            "predicted_return": 0.10302262008190155,
            "entry_price": 623.0,
            "exit_date": "2025-01-20",
            "exit_price": 565.0,
            "holding_days": 20,
            "actual_return_gross": -0.09309791332263243,
            "profit_loss_gross": -58000.0,
            "max_return_20d": 0.02247191011235955,
            "min_return_20d": -0.1942215088282504,
            "shares": 1000,
            "investment_amount": 623000.0,
            "month_end_value": 561018.1,
            "actual_return_net": -0.09948940609951847,
            "profit_loss_net": -61981.9,
            "transaction_costs": {
              "buy_commission": 887.775,
              "buy_slippage": 311.5,
              "sell_commission": 805.125,
              "sell_tax": 1695.0,
              "sell_slippage": 282.5,
              "total_cost_amount": 3981.9,
              "total_cost_rate": 0.006391492776886036
            },
            "cost_impact": 0.00639149277688604,
            "actual_return": -0.09948940609951847,
            "profit_loss": -61981.9
          },
          {
            "entry_date": "2024-12-31",
            "stock_id": "2392",
            "model_type": "xgboost",
            "predicted_return": 0.09384411573410034,
            "entry_price": 72.6,
            "exit_date": "2025-01-20",
            "exit_price": 68.2,
            "holding_days": 20,
            "actual_return_gross": -0.0606060606060605,
            "profit_loss_gross": -4399.999999999992,
            "max_return_20d": 0.0,
            "min_return_20d": -0.10192837465564727,
            "shares": 1000,
            "investment_amount": 72600.0,
            "month_end_value": 67724.36,
            "actual_return_net": -0.06715757575757565,
            "profit_loss_net": -4875.639999999992,
            "transaction_costs": {
              "buy_commission": 103.455,
              "buy_slippage": 36.300000000000004,
              "sell_commission": 97.185,
              "sell_tax": 204.6,
              "sell_slippage": 34.1,
              "total_cost_amount": 475.64,
              "total_cost_rate": 0.006551515151515151
            },
            "cost_impact": 0.006551515151515155,
            "actual_return": -0.06715757575757565,
            "profit_loss": -4875.639999999992
          },
          {
            "entry_date": "2024-12-31",
            "stock_id": "5392",
            "model_type": "xgboost",
            "predicted_return": 0.09360628575086594,
            "entry_price": 38.0,
            "exit_date": "2025-01-20",
            "exit_price": 34.9,
            "holding_days": 20,
            "actual_return_gross": -0.08157894736842108,
            "profit_loss_gross": -9300.000000000004,
            "max_return_20d": 0.0,
            "min_return_20d": -0.19605263157894734,
            "shares": 3000,
            "investment_amount": 114000.0,
            "month_end_value": 103964.9025,
            "actual_return_net": -0.08802717105263161,
            "profit_loss_net": -10035.097500000003,
            "transaction_costs": {
              "buy_commission": 162.45000000000002,
              "buy_slippage": 57.0,
              "sell_commission": 149.19750000000002,
              "sell_tax": 314.1,
              "sell_slippage": 52.35,
              "total_cost_amount": 735.0975000000001,
              "total_cost_rate": 0.006448223684210527
            },
            "cost_impact": 0.0064482236842105245,
            "actual_return": -0.08802717105263161,
            "profit_loss": -10035.097500000003
          }
        ]
      }
    ]
  },
  "monthly_results_count": 1,
  "total_trades": 5,
  "detailed_trades": [
    {
      "entry_date": "2024-12-31",
      "stock_id": "8033",
      "model_type": "random_forest",
      "predicted_return": 0.18594762734933087,
      "entry_price": 69.9,
      "exit_date": "2025-01-20",
      "exit_price": 67.5,
      "holding_days": 20,
      "actual_return_gross": -0.03433476394849793,
      "profit_loss_gross": -4800.000000000011,
      "max_return_20d": 0.0,
      "min_return_20d": -0.10586552217453513,
      "shares": 2000,
      "investment_amount": 139800.0,
      "month_end_value": 134066.01,
      "actual_return_net": -0.04101566523605158,
      "profit_loss_net": -5733.990000000011,
      "transaction_costs": {
        "buy_commission": 199.215,
        "buy_slippage": 69.9,
        "sell_commission": 192.375,
        "sell_tax": 405.0,
        "sell_slippage": 67.5,
        "total_cost_amount": 933.99,
        "total_cost_rate": 0.006680901287553648
      },
      "cost_impact": 0.0066809012875536505,
      "actual_return": -0.04101566523605158,
      "profit_loss": -5733.990000000011
    },
    {
      "entry_date": "2024-12-31",
      "stock_id": "2442",
      "model_type": "xgboost",
      "predicted_return": 0.10500837117433548,
      "entry_price": 25.2,
      "exit_date": "2025-01-20",
      "exit_price": 24.6,
      "holding_days": 20,
      "actual_return_gross": -0.023809523809523725,
      "profit_loss_gross": -2999.9999999999895,
      "max_return_20d": 0.003968253968254024,
      "min_return_20d": -0.07142857142857145,
      "shares": 5000,
      "investment_amount": 126000.0,
      "month_end_value": 122151.675,
      "actual_return_net": -0.030542261904761822,
      "profit_loss_net": -3848.32499999999,
      "transaction_costs": {
        "buy_commission": 179.55,
        "buy_slippage": 63.0,
        "sell_commission": 175.275,
        "sell_tax": 369.0,
        "sell_slippage": 61.5,
        "total_cost_amount": 848.325,
        "total_cost_rate": 0.0067327380952380955
      },
      "cost_impact": 0.006732738095238097,
      "actual_return": -0.030542261904761822,
      "profit_loss": -3848.32499999999
    },
    {
      "entry_date": "2024-12-31",
      "stock_id": "3017",
      "model_type": "xgboost",
      "predicted_return": 0.10302262008190155,
      "entry_price": 623.0,
      "exit_date": "2025-01-20",
      "exit_price": 565.0,
      "holding_days": 20,
      "actual_return_gross": -0.09309791332263243,
      "profit_loss_gross": -58000.0,
      "max_return_20d": 0.02247191011235955,
      "min_return_20d": -0.1942215088282504,
      "shares": 1000,
      "investment_amount": 623000.0,
      "month_end_value": 561018.1,
      "actual_return_net": -0.09948940609951847,
      "profit_loss_net": -61981.9,
      "transaction_costs": {
        "buy_commission": 887.775,
        "buy_slippage": 311.5,
        "sell_commission": 805.125,
        "sell_tax": 1695.0,
        "sell_slippage": 282.5,
        "total_cost_amount": 3981.9,
        "total_cost_rate": 0.006391492776886036
      },
      "cost_impact": 0.00639149277688604,
      "actual_return": -0.09948940609951847,
      "profit_loss": -61981.9
    },
    {
      "entry_date": "2024-12-31",
      "stock_id": "2392",
      "model_type": "xgboost",
      "predicted_return": 0.09384411573410034,
      "entry_price": 72.6,
      "exit_date": "2025-01-20",
      "exit_price": 68.2,
      "holding_days": 20,
      "actual_return_gross": -0.0606060606060605,
      "profit_loss_gross": -4399.999999999992,
      "max_return_20d": 0.0,
      "min_return_20d": -0.10192837465564727,
      "shares": 1000,
      "investment_amount": 72600.0,
      "month_end_value": 67724.36,
      "actual_return_net": -0.06715757575757565,
      "profit_loss_net": -4875.639999999992,
      "transaction_costs": {
        "buy_commission": 103.455,
        "buy_slippage": 36.300000000000004,
        "sell_commission": 97.185,
        "sell_tax": 204.6,
        "sell_slippage": 34.1,
        "total_cost_amount": 475.64,
        "total_cost_rate": 0.006551515151515151
      },
      "cost_impact": 0.006551515151515155,
      "actual_return": -0.06715757575757565,
      "profit_loss": -4875.639999999992
    },
    {
      "entry_date": "2024-12-31",
      "stock_id": "5392",
      "model_type": "xgboost",
      "predicted_return": 0.09360628575086594,
      "entry_price": 38.0,
      "exit_date": "2025-01-20",
      "exit_price": 34.9,
      "holding_days": 20,
      "actual_return_gross": -0.08157894736842108,
      "profit_loss_gross": -9300.000000000004,
      "max_return_20d": 0.0,
      "min_return_20d": -0.19605263157894734,
      "shares": 3000,
      "investment_amount": 114000.0,
      "month_end_value": 103964.9025,
      "actual_return_net": -0.08802717105263161,
      "profit_loss_net": -10035.097500000003,
      "transaction_costs": {
        "buy_commission": 162.45000000000002,
        "buy_slippage": 57.0,
        "sell_commission": 149.19750000000002,
        "sell_tax": 314.1,
        "sell_slippage": 52.35,
        "total_cost_amount": 735.0975000000001,
        "total_cost_rate": 0.006448223684210527
      },
      "cost_impact": 0.0064482236842105245,
      "actual_return": -0.08802717105263161,
      "profit_loss": -10035.097500000003
    }
  ],
  "generated_at": "2025-08-28T11:15:01.357805",
  "charts": {
    "nav_curve": "G:\\WorkFolder\\taiwan-stock-system\\stock_price_investment_system\\results\\holdout\\holdout_202412_202412_020_k7_MF_0828110112\\charts\\nav_curve_20250828_111502.png",
    "monthly_returns": "G:\\WorkFolder\\taiwan-stock-system\\stock_price_investment_system\\results\\holdout\\holdout_202412_202412_020_k7_MF_0828110112\\charts\\monthly_returns_20250828_111503.png",
    "trade_statistics": "G:\\WorkFolder\\taiwan-stock-system\\stock_price_investment_system\\results\\holdout\\holdout_202412_202412_020_k7_MF_0828110112\\charts\\trade_statistics_20250828_111504.png",
    "stock_performance": "G:\\WorkFolder\\taiwan-stock-system\\stock_price_investment_system\\results\\holdout\\holdout_202412_202412_020_k7_MF_0828110112\\charts\\stock_performance_20250828_111504.png"
  },
  "stop_loss_analysis": {
    "best_stop_loss": 0.02,
    "best_take_profit": 0.05,
    "best_score": -10.624389679632277,
    "performance_improvement": {
      "avg_return_improvement": 59.29129012240929,
      "win_rate_improvement": 0,
      "max_drawdown_improvement": 60.36879193626754,
      "original_avg_return": -0.06524641601010783,
      "optimal_avg_return": -0.02656097419908069,
      "original_win_rate": 0.0,
      "optimal_win_rate": 0.0,
      "original_max_drawdown": 0.2573094533339223,
      "optimal_max_drawdown": 0.10197484481841931
    }
  }
}