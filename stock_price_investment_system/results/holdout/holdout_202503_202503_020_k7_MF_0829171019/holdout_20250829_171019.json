{
  "backtest_type": "monthly_investment",
  "parameters": {
    "start_date": "2025-03-01",
    "end_date": "2025-03-31",
    "monthly_investment": 1000000.0,
    "min_predicted_return": 0.02,
    "top_k": 7,
    "use_market_filter": true
  },
  "portfolio_metrics": {
    "total_invested": 896050.0,
    "total_current_value": 818565.1799999999,
    "total_return": -0.08647376820489935,
    "total_profit_loss": -77484.82000000007,
    "avg_monthly_return": -0.08647376820489935,
    "monthly_volatility": NaN,
    "annualized_return": -0.6622057357502202,
    "annualized_volatility": NaN,
    "sharpe_ratio": 0,
    "max_drawdown": 0.0,
    "win_rate": 0.0,
    "monthly_win_rate": 0.0,
    "total_trades": 3,
    "total_months": 1,
    "successful_months": 0
  },
  "monthly_results_count": 1,
  "total_trades": 3,
  "detailed_trades": [
    {
      "entry_date": "2025-03-31",
      "stock_id": "8067",
      "model_type": "xgboost",
      "predicted_return": 0.1371227651834488,
      "entry_price": 16.25,
      "exit_date": "2025-04-18",
      "exit_price": 14.0,
      "holding_days": 18,
      "actual_return_gross": -0.13846153846153847,
      "profit_loss_gross": -45000.0,
      "max_return_20d": 0.009230769230769143,
      "min_return_20d": -0.21230769230769225,
      "shares": 20000,
      "investment_amount": 325000.0,
      "month_end_value": 277995.375,
      "actual_return_net": -0.14462961538461538,
      "profit_loss_net": -47004.625,
      "transaction_costs": {
        "buy_commission": 463.125,
        "buy_slippage": 162.5,
        "sell_commission": 399.0,
        "sell_tax": 840.0,
        "sell_slippage": 140.0,
        "total_cost_amount": 2004.625,
        "total_cost_rate": 0.006168076923076923
      },
      "cost_impact": 0.006168076923076915,
      "actual_return": -0.14462961538461538,
      "profit_loss": -47004.625
    },
    {
      "entry_date": "2025-03-31",
      "stock_id": "8279",
      "model_type": "random_forest",
      "predicted_return": 0.07813794403276092,
      "entry_price": 124.0,
      "exit_date": "2025-04-18",
      "exit_price": 123.0,
      "holding_days": 18,
      "actual_return_gross": -0.008064516129032258,
      "profit_loss_gross": -2000.0,
      "max_return_20d": 0.024193548387096774,
      "min_return_20d": -0.125,
      "shares": 2000,
      "investment_amount": 248000.0,
      "month_end_value": 244311.05,
      "actual_return_net": -0.014874798387096773,
      "profit_loss_net": -3688.95,
      "transaction_costs": {
        "buy_commission": 353.40000000000003,
        "buy_slippage": 124.0,
        "sell_commission": 350.55,
        "sell_tax": 738.0,
        "sell_slippage": 123.0,
        "total_cost_amount": 1688.95,
        "total_cost_rate": 0.006810282258064516
      },
      "cost_impact": 0.006810282258064515,
      "actual_return": -0.014874798387096773,
      "profit_loss": -3688.95
    },
    {
      "entry_date": "2025-03-31",
      "stock_id": "2442",
      "model_type": "xgboost",
      "predicted_return": 0.05453655123710632,
      "entry_price": 24.85,
      "exit_date": "2025-04-18",
      "exit_price": 22.95,
      "holding_days": 18,
      "actual_return_gross": -0.07645875251509063,
      "profit_loss_gross": -24700.00000000003,
      "max_return_20d": 0.008048289738430555,
      "min_return_20d": -0.22132796780684103,
      "shares": 13000,
      "investment_amount": 323050.0,
      "month_end_value": 296258.755,
      "actual_return_net": -0.08293219315895381,
      "profit_loss_net": -26791.245000000028,
      "transaction_costs": {
        "buy_commission": 460.34625,
        "buy_slippage": 161.525,
        "sell_commission": 425.14875,
        "sell_tax": 895.0500000000001,
        "sell_slippage": 149.175,
        "total_cost_amount": 2091.2450000000003,
        "total_cost_rate": 0.00647344064386318
      },
      "cost_impact": 0.006473440643863182,
      "actual_return": -0.08293219315895381,
      "profit_loss": -26791.245000000028
    }
  ],
  "generated_at": "2025-08-29T17:10:32.482372",
  "charts": {
    "nav_curve": "G:\\WorkFolder\\taiwan-stock-system\\stock_price_investment_system\\results\\holdout\\holdout_202503_202503_020_k7_MF_0829171019\\charts\\nav_curve_20250829_171033.png",
    "monthly_returns": "G:\\WorkFolder\\taiwan-stock-system\\stock_price_investment_system\\results\\holdout\\holdout_202503_202503_020_k7_MF_0829171019\\charts\\monthly_returns_20250829_171034.png",
    "trade_statistics": "G:\\WorkFolder\\taiwan-stock-system\\stock_price_investment_system\\results\\holdout\\holdout_202503_202503_020_k7_MF_0829171019\\charts\\trade_statistics_20250829_171034.png",
    "stock_performance": "G:\\WorkFolder\\taiwan-stock-system\\stock_price_investment_system\\results\\holdout\\holdout_202503_202503_020_k7_MF_0829171019\\charts\\stock_performance_20250829_171035.png"
  },
  "stop_loss_analysis": {
    "best_strategy": "A",
    "best_stop_loss": 0.02,
    "best_take_profit": 0.05,
    "best_score": 11.361243486352372,
    "performance_improvement": {
      "avg_return_improvement": 67.22131208739489,
      "win_rate_improvement": 0,
      "max_drawdown_improvement": 72.23843780099789,
      "original_avg_return": -0.08081220231022199,
      "optimal_avg_return": -0.02648917959057072,
      "original_win_rate": 0.0,
      "optimal_win_rate": 0.0,
      "original_max_drawdown": 0.0965733918930115,
      "optimal_max_drawdown": 0.026810282258064456
    },
    "all_strategies": {
      "original": {
        "total_trades": 3,
        "winning_trades": 0,
        "win_rate": 0.0,
        "avg_return": -0.026483933275001537,
        "total_return": -0.07945179982500461,
        "max_drawdown": 0.05257396248592356,
        "exit_reasons": {
          "stop_loss": 3
        },
        "simulated_trades": [
          {
            "stock_id": "8067",
            "entry_date": "2025-03-31",
            "original_return": -0.14462961538461538,
            "simulated_return": -0.026168076923076922,
            "exit_reason": "stop_loss",
            "max_return": 0.009230769230769143,
            "min_return": -0.21230769230769225
          },
          {
            "stock_id": "8279",
            "entry_date": "2025-03-31",
            "original_return": -0.014874798387096773,
            "simulated_return": -0.026810282258064515,
            "exit_reason": "stop_loss",
            "max_return": 0.024193548387096774,
            "min_return": -0.125
          },
          {
            "stock_id": "2442",
            "entry_date": "2025-03-31",
            "original_return": -0.08293219315895381,
            "simulated_return": -0.02647344064386318,
            "exit_reason": "stop_loss",
            "max_return": 0.008048289738430555,
            "min_return": -0.22132796780684103
          }
        ],
        "stop_loss": 0.02,
        "take_profit": 0.05,
        "score": 3.634237944222317
      },
      "A": {
        "total_trades": 2,
        "winning_trades": 0,
        "win_rate": 0.0,
        "avg_return": -0.02648917959057072,
        "total_return": -0.05297835918114144,
        "max_drawdown": 0.026810282258064456,
        "exit_reasons": {
          "stop_loss": 2
        },
        "simulated_trades": [
          {
            "stock_id": "8067",
            "entry_date": "2025-03-31",
            "original_return": -0.14462961538461538,
            "simulated_return": -0.026168076923076922,
            "exit_reason": "stop_loss",
            "max_return": 0.009230769230769143,
            "min_return": -0.21230769230769225
          },
          {
            "stock_id": "8279",
            "entry_date": "2025-03-31",
            "original_return": -0.014874798387096773,
            "simulated_return": -0.026810282258064515,
            "exit_reason": "stop_loss",
            "max_return": 0.024193548387096774,
            "min_return": -0.125
          }
        ],
        "stop_loss": 0.02,
        "take_profit": 0.05,
        "score": 11.361243486352372
      },
      "B": {
        "total_trades": 2,
        "winning_trades": 0,
        "win_rate": 0.0,
        "avg_return": -0.02648917959057072,
        "total_return": -0.05297835918114144,
        "max_drawdown": 0.026810282258064456,
        "exit_reasons": {
          "stop_loss": 2
        },
        "simulated_trades": [
          {
            "stock_id": "8067",
            "entry_date": "2025-03-31",
            "original_return": -0.14462961538461538,
            "simulated_return": -0.026168076923076922,
            "exit_reason": "stop_loss",
            "max_return": 0.009230769230769143,
            "min_return": -0.21230769230769225
          },
          {
            "stock_id": "8279",
            "entry_date": "2025-03-31",
            "original_return": -0.014874798387096773,
            "simulated_return": -0.026810282258064515,
            "exit_reason": "stop_loss",
            "max_return": 0.024193548387096774,
            "min_return": -0.125
          }
        ],
        "stop_loss": 0.02,
        "take_profit": 0.05,
        "score": 11.361243486352372
      }
    }
  }
}