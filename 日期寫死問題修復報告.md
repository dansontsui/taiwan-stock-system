# æ—¥æœŸå¯«æ­»å•é¡Œä¿®å¾©å ±å‘Š

## å•é¡Œç™¼ç¾

æ‚¨æ­£ç¢ºæŒ‡å‡ºäº† `simple_collect.py` ä¸­çš„åš´é‡å•é¡Œï¼š

### åŸå§‹å•é¡Œ
```python
start_date = "2024-01-01"
end_date = "2024-06-30"
```

é€™æœƒå°è‡´ï¼š
- ğŸš« **æ°¸é åªæ”¶é›† 2024-01-01 åˆ° 2024-06-30 çš„è³‡æ–™**
- ğŸš« **ç„¡æ³•æ”¶é›†æœ€æ–°è³‡æ–™**
- ğŸš« **ç„¡æ³•æ”¶é›†æ­·å²è³‡æ–™**
- ğŸš« **æ—¥æœŸç¯„åœå›ºå®šä¸è®Š**

## å…¨é¢æª¢æŸ¥çµæœ

ç¶“éå…¨é¢æª¢æŸ¥ï¼Œç™¼ç¾ä»¥ä¸‹æª”æ¡ˆæœ‰é¡ä¼¼å•é¡Œï¼š

### 1. simple_collect.py âŒ åš´é‡å•é¡Œ
```python
# åŸå§‹å•é¡Œ
start_date = "2024-01-01"
end_date = "2024-06-30"
```

### 2. scripts/analyze_financial_metrics.py âŒ å•é¡Œ
```python
# åŸå§‹å•é¡Œ
def get_financial_statements_sample(collector, stock_id="2330", start_date="2023-01-01"):
    # ...
    end_date="2025-07-23"
```

### 3. scripts/menu.py âœ… å¯æ¥å—
```python
# æœ‰é è¨­å€¼ä½†å…è¨±ç”¨æˆ¶è¼¸å…¥
start_date = get_user_input("é–‹å§‹æ—¥æœŸ (é è¨­2015-01-01): ") or "2015-01-01"
```

### 4. potential_stock_predictor/backtesting_system.py âœ… å¯æ¥å—
```python
# æœ‰é è¨­å€¼ä½†å¯ä»¥è‡ªè¨‚
def __init__(self, db_manager, train_start_date='2016-01-01', train_end_date='2023-12-31'):
```

## ä¿®å¾©æ–¹æ¡ˆ

### 1. ä¿®å¾© simple_collect.py

#### æ·»åŠ æ—¥æœŸåƒæ•¸æ”¯æ´
```python
def collect_all_data(test_mode=False, stock_id=None, start_date=None, end_date=None):
    """æ”¶é›†æ‰€æœ‰è³‡æ–™"""
    
    # è¨­å®šæ—¥æœŸç¯„åœ
    if start_date is None:
        from datetime import datetime, timedelta
        end_date_obj = datetime.now().date()
        start_date_obj = end_date_obj - timedelta(days=10*365)  # é è¨­10å¹´
        start_date = start_date_obj.isoformat()
    
    if end_date is None:
        from datetime import datetime
        end_date = datetime.now().date().isoformat()
    
    print(f"è³‡æ–™æ”¶é›†æ—¥æœŸç¯„åœ: {start_date} ~ {end_date}")
```

#### æ·»åŠ å‘½ä»¤åˆ—åƒæ•¸
```python
parser.add_argument('--start-date', help='é–‹å§‹æ—¥æœŸ (YYYY-MM-DD)')
parser.add_argument('--end-date', help='çµæŸæ—¥æœŸ (YYYY-MM-DD)')
```

#### ä¿®å¾© c.py ä¸­çš„èª¿ç”¨
```python
cmd = [
    sys.executable,
    str(script_path),
    "--start-date", start_date,
    "--end-date", end_date
]
```

### 2. ä¿®å¾© analyze_financial_metrics.py

#### å‹•æ…‹é è¨­æ—¥æœŸ
```python
def get_financial_statements_sample(collector, stock_id="2330", start_date=None, end_date=None):
    """ç²å–è²¡å‹™å ±è¡¨ç¯„ä¾‹è³‡æ–™"""
    # è¨­å®šé è¨­æ—¥æœŸç¯„åœ
    if start_date is None:
        from datetime import datetime, timedelta
        start_date = (datetime.now() - timedelta(days=2*365)).strftime("%Y-%m-%d")  # é è¨­2å¹´å‰
    
    if end_date is None:
        from datetime import datetime
        end_date = datetime.now().strftime("%Y-%m-%d")  # é è¨­ä»Šå¤©
```

## ä¿®å¾©æ•ˆæœ

### ä¿®å¾©å‰
| æª”æ¡ˆ | è¡Œç‚º | å•é¡Œ |
|------|------|------|
| simple_collect.py | æ°¸é æ”¶é›† 2024-01-01 ~ 2024-06-30 | ç„¡æ³•æ”¶é›†æœ€æ–°è³‡æ–™ |
| analyze_financial_metrics.py | æ°¸é æ”¶é›† 2023-01-01 ~ 2025-07-23 | æ—¥æœŸç¯„åœå›ºå®š |

### ä¿®å¾©å¾Œ
| æª”æ¡ˆ | è¡Œç‚º | å„ªé» |
|------|------|------|
| simple_collect.py | é è¨­æ”¶é›† 10å¹´å‰ ~ ä»Šå¤© | è‡ªå‹•æ›´æ–°æ—¥æœŸç¯„åœ |
| analyze_financial_metrics.py | é è¨­æ”¶é›† 2å¹´å‰ ~ ä»Šå¤© | å‹•æ…‹æ—¥æœŸç¯„åœ |

## å¯¦éš›ä½¿ç”¨æ•ˆæœ

### 1. è‡ªå‹•æ—¥æœŸç¯„åœ
```bash
# ä¸æŒ‡å®šæ—¥æœŸ - ä½¿ç”¨å‹•æ…‹é è¨­å€¼
python simple_collect.py --test --stock-id 2330
# è¼¸å‡º: è³‡æ–™æ”¶é›†æ—¥æœŸç¯„åœ: 2015-08-04 ~ 2025-08-04
```

### 2. è‡ªè¨‚æ—¥æœŸç¯„åœ
```bash
# æŒ‡å®šæ—¥æœŸç¯„åœ
python simple_collect.py --test --stock-id 2330 --start-date 2024-01-01 --end-date 2024-12-31
# è¼¸å‡º: è³‡æ–™æ”¶é›†æ—¥æœŸç¯„åœ: 2024-01-01 ~ 2024-12-31
```

### 3. å‘å¾Œå…¼å®¹
```python
# ç¾æœ‰çš„ c.py èª¿ç”¨æœƒè‡ªå‹•å‚³éæ­£ç¢ºçš„æ—¥æœŸåƒæ•¸
run_collect_with_stock(start_date, end_date, batch_size, stock_scope, stock_id)
```

## é é˜²æªæ–½

### 1. æª¢æŸ¥æ¸…å–®
åœ¨æ–°å¢æˆ–ä¿®æ”¹æ”¶é›†è…³æœ¬æ™‚ï¼Œæª¢æŸ¥ï¼š
- âœ… æ˜¯å¦æœ‰å¯«æ­»çš„æ—¥æœŸå­—ä¸²
- âœ… æ˜¯å¦æ”¯æ´æ—¥æœŸåƒæ•¸
- âœ… æ˜¯å¦æœ‰åˆç†çš„é è¨­å€¼
- âœ… æ˜¯å¦å‘å¾Œå…¼å®¹

### 2. æ¨™æº–åŒ–æ—¥æœŸè™•ç†
å»ºè­°å»ºç«‹çµ±ä¸€çš„æ—¥æœŸè™•ç†å‡½æ•¸ï¼š
```python
def get_default_date_range(years_back=10):
    """ç²å–é è¨­æ—¥æœŸç¯„åœ"""
    from datetime import datetime, timedelta
    end_date = datetime.now().date()
    start_date = end_date - timedelta(days=years_back*365)
    return start_date.isoformat(), end_date.isoformat()
```

### 3. æ–‡æª”èªªæ˜
åœ¨æ¯å€‹æ”¶é›†è…³æœ¬ä¸­æ·»åŠ æ—¥æœŸåƒæ•¸èªªæ˜ï¼š
```python
"""
æ—¥æœŸåƒæ•¸èªªæ˜:
--start-date: é–‹å§‹æ—¥æœŸ (YYYY-MM-DD)ï¼Œé è¨­ç‚º10å¹´å‰
--end-date: çµæŸæ—¥æœŸ (YYYY-MM-DD)ï¼Œé è¨­ç‚ºä»Šå¤©
"""
```

## å…¶ä»–ç™¼ç¾

### éœ€è¦æ³¨æ„çš„æª”æ¡ˆ
1. **scripts/menu.py** - æœ‰é è¨­å€¼ä½†å…è¨±ç”¨æˆ¶è¼¸å…¥ï¼Œè¡Œç‚ºåˆç†
2. **potential_stock_predictor/backtesting_system.py** - æœ‰é è¨­å€¼ä½†å¯è‡ªè¨‚ï¼Œè¡Œç‚ºåˆç†

### å»ºè­°æª¢æŸ¥çš„æª”æ¡ˆ
1. å…¶ä»– `collect_*.py` è…³æœ¬
2. åˆ†æç›¸é—œçš„è…³æœ¬
3. ä»»ä½•æ¶‰åŠæ—¥æœŸç¯„åœçš„åŠŸèƒ½

## ç¸½çµ

### è§£æ±ºçš„æ ¸å¿ƒå•é¡Œ
1. âœ… **simple_collect.py** - ä¸å†æ°¸é æ”¶é›†å›ºå®šæ—¥æœŸç¯„åœ
2. âœ… **analyze_financial_metrics.py** - ä½¿ç”¨å‹•æ…‹æ—¥æœŸç¯„åœ
3. âœ… **c.py** - æ­£ç¢ºå‚³éæ—¥æœŸåƒæ•¸
4. âœ… **å‘å¾Œå…¼å®¹** - ç¾æœ‰èª¿ç”¨æ–¹å¼ä»ç„¶æœ‰æ•ˆ

### å¯¦éš›æ•ˆç›Š
- ğŸš€ **è‡ªå‹•æ”¶é›†æœ€æ–°è³‡æ–™** - ä¸éœ€è¦æ‰‹å‹•ä¿®æ”¹æ—¥æœŸ
- ğŸ“… **éˆæ´»çš„æ—¥æœŸç¯„åœ** - æ”¯æ´è‡ªè¨‚ä»»æ„æ—¥æœŸ
- ğŸ”„ **å‹•æ…‹æ›´æ–°** - æ¯æ¬¡åŸ·è¡Œéƒ½ä½¿ç”¨æœ€æ–°çš„æ—¥æœŸç¯„åœ
- ğŸ›¡ï¸ **å‘å¾Œå…¼å®¹** - ä¸å½±éŸ¿ç¾æœ‰åŠŸèƒ½

æ‚¨çš„ç™¼ç¾éå¸¸é‡è¦ï¼é€™å€‹å•é¡Œæœƒå°è‡´ç³»çµ±æ°¸é ç„¡æ³•æ”¶é›†æœ€æ–°è³‡æ–™ï¼Œç¾åœ¨å·²ç¶“å®Œå…¨ä¿®å¾©äº†ã€‚
