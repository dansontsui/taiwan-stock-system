# 快速驗證候選池使用說明

## 🎯 **已完成！**

我已經成功從原始候選池中提取了5701和8271兩檔股票，創建了專門用於快速驗證的JSON檔案。

## 📁 **檔案資訊**

### **新建的測試檔案**
- **檔案路徑**: `stock_price_investment_system/results/candidate_pools/candidate_pool_5701_8271_test.json`
- **檔案大小**: 273行（相比原始檔案的50萬行）
- **編碼格式**: UTF-8（無BOM）
- **JSON格式**: 完全正確

### **包含的股票資料**

#### **8271 (評分: 82.79)**
- **交易次數**: 16次
- **勝率**: 100%
- **平均報酬**: 6.59%
- **fold數**: 3
- **最大回撤**: 2.44%

#### **5701 (評分: 77.79)**
- **交易次數**: 6次
- **勝率**: 100%
- **平均報酬**: 4.59%
- **fold數**: 2
- **最大回撤**: 0.18%

## 🚀 **如何使用**

### **1. 執行選單5a（每月定期定額投資回測）**
```bash
python stock_price_investment_system/start.py
# 選擇 5a) 執行每月定期定額投資回測（含交易成本）
# 當系統詢問候選池檔案時，輸入: candidate_pool_5701_8271_test.json
```

### **2. 執行選單5b（自定義停損停利回測）**
```bash
python stock_price_investment_system/start.py
# 選擇 5b) 執行自定義停損停利回測
# 當系統詢問候選池檔案時，輸入: candidate_pool_5701_8271_test.json
```

### **3. 執行選單5（等權重回測）**
```bash
python stock_price_investment_system/start.py
# 選擇 5) 執行holdout回測
# 當系統詢問候選池檔案時，輸入: candidate_pool_5701_8271_test.json
```

## ⚡ **快速驗證優點**

### **1. 執行速度快**
- 只有2檔股票，執行時間大幅縮短
- 適合測試新功能或驗證修正

### **2. 結果清晰**
- 股票數量少，容易分析結果
- 可以快速確認計算邏輯是否正確

### **3. 資料完整**
- 包含完整的交易歷史資料
- 包含所有必要的統計資訊
- 格式與原始候選池完全相同

## 📊 **預期結果**

### **選單5a執行結果**
- 會生成包含2檔股票的月度投資回測
- 每月投資金額會平均分配給這2檔股票
- 可以快速驗證交易成本計算是否正確

### **選單5b執行結果**
- 會對這2檔股票執行停損停利策略
- 可以快速驗證停損停利邏輯是否正確
- 執行時間大幅縮短

### **選單5執行結果**
- 會生成等權重回測結果
- 可以與選單5a的結果進行比較
- 驗證兩種計算方式的一致性

## 🔍 **驗證重點**

### **1. 交易成本計算**
- 確認選單5和5b的交易成本計算一致
- 檢查月底價值是否正確扣除交易成本

### **2. 報酬率計算**
- 毛報酬率 vs 淨報酬率
- 成本影響分析

### **3. 檔案輸出**
- CSV檔案格式正確
- JSON結果檔案完整
- 圖表生成正常

## 💡 **使用建議**

### **測試流程**
1. **先執行選單5a** - 驗證每月定期定額功能
2. **再執行選單5b** - 驗證停損停利功能  
3. **最後執行選單5** - 驗證等權重回測功能
4. **比較結果** - 確認計算邏輯一致性

### **問題排查**
- 如果出現編碼錯誤，檔案已經是UTF-8無BOM格式
- 如果JSON解析失敗，檔案格式已經驗證正確
- 如果找不到股票資料，檔案包含完整的歷史交易記錄

## ✅ **總結**

**快速驗證候選池已準備就緒！**

- ✅ **檔案位置**: `candidate_pool_5701_8271_test.json`
- ✅ **包含股票**: 5701, 8271
- ✅ **格式正確**: UTF-8無BOM，有效JSON
- ✅ **資料完整**: 包含所有必要的交易和統計資訊
- ✅ **執行速度**: 比原始檔案快數十倍

**現在您可以使用這個測試檔案進行快速驗證了！** 🚀
